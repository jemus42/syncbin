#! /usr/bin/env Rscript

command = paste(
	"squeue",
	"--me",
	"--format='%.16P %.10T %R %.m %.25k'"
)

tab = data.table::fread(cmd = command)
tab$PARTITION <- ifelse(tab$PARTITION == "inv-compsci", "teton-knl", tab$PARTITION)

tab |>
  dplyr::count(STATE, COMMENT, PARTITION) |>
  dplyr::arrange(STATE, COMMENT) |>
	knitr::kable()
