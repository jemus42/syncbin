
# Create new octopress blogpost and open with Mou.app
# Usage example: newpost "Let's talk about anthropomorphism in frozen yoghurt"
ME=$(whoami)

if [[ $ME == "Lukas" ]]; then

	function newpost() {

		POSTDIR="$HOME/repos/jemus42/quantenbrot/qblog/source/_posts"
		cd $HOME/repos/jemus42/quantenbrot/qblog
		bundle exec rake "new_post[$@]"
		POST=$(ls -t $POSTDIR | head -1)
		atom $POSTDIR/$POST

	}



	function mcscreen() {

		builtin cd $HOME/Library/Application\ Support/minecraft/screenshots
		SCREENSHOT=$(ls -t | head -1)

		scp $SCREENSHOT strato:/srv/dump.quantenbrot.de/mc
		echo "http://dump.quantenbrot.de/mc/$SCREENSHOT" | pbcopy;

		cd -;

	}

fi

# Create a new directory and enter it
function mkd() {
        mkdir -p "$@" && cd "$@"
}

# Dump files to my filedump, because dump
function dump {

	rsync-copy --partial "$1" strato:/srv/dump.quantenbrot.de
	FILE=$(basename $1)
	if [[ $ME == "Lukas" ]]; then
		echo "http://dump.jemu.name/$FILE" | pbcopy
	else echo "http://dump.jemu.name/$FILE"
	fi
	echo "$(date '+%Y-%m-%d %H:%M:%S'): $FILE – http://dump.quantenbrot.de/$FILE" >> $HOME/.dumplog
	terminal-notifier -title "Filedump" -message "$FILE" -execute subl $HOME/.dumplog
}

function dumpwmb {

	FILE=$(basename $1)
	if [[ -z "$2" ]] ; then
		DEST="$FILE"
			else DEST="$2"
	fi
	URL="http://i.wurstmineberg.de/$DEST"

	if [[ $ME == "Lukas" ]]; then
		echo $URL | pbcopy
	else echo $URL
	fi

	rsync-copy "$1" nessus:"pics/$DEST"
	echo "$(date '+%Y-%m-%d %H:%M:%S'): $FILE – $URL" >> $HOME/.dumplog
	terminal-notifier -title "Dump to WMB" -message "$FILE – $URL" -execute subl $HOME/.dumplog
}

source ~/.functions.local
