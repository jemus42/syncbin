#! /usr/bin/env Rscript

command = paste(
	"squeue",
	"--me",
	"--format='%.26P %.10T %R %.m %.25k'"
)

tab = data.table::fread(cmd = command)
tab[, PARTITION := ifelse(PARTITION == "inv-compsci", "teton-knl", PARTITION)]

tab |>
  dplyr::count(STATE, COMMENT, PARTITION) |>
  dplyr::arrange(STATE, COMMENT) |>
	knitr::kable()
